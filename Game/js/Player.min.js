Player=function(a,b,c){Sprite.call(this);this.id=a;this.name=b;this.sex=c||Player.MALE;this.defaultPortrait=this.portrait=null;this.score=0;this.level=Level.getLevel(this.score);this.pokers=null;this.twoking=[];this.bomb=[];this.triple=[];this.pair=[];this.single=[];this.pokerScore=0;this.mouseChildren=!1;this.init()};casual.inherit(Player,Sprite);
Player.prototype.init=function(){var a=casual.copy(R.playerFrame);this.addChild(a);this.frame=a;this.width=a.width;this.height=a.height;var b=new GroupBitmap(R.number);b.x=a.x+2;b.y=a.y+a.height+32;0==this.id&&(b.y-=30);this.addChild(b);this.pokerCount=b};Player.prototype.reset=function(){this.twoking.length=0;this.bomb.length=0;this.single.length=0;this.triple.length=0;this.pokerScore=this.pair.length=0;this.lastPokers=this.pokers=null};
Player.prototype.getSelectedPokers=function(){for(var a=[],b=0;b<this.pokers.length;b++)this.pokers[b].selected&&a.push(this.pokers[b]);return a};Player.prototype.deletePokers=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this.pokers.indexOf(c);0<=d&&this.pokers.splice(d,1);c.mouseEnabled=!1}};Player.prototype.clearLastPokers=function(){if(this.lastPokers){for(var a=0;a<this.lastPokers.length;a++){var b=this.lastPokers[a];b.parent&&b.parent.removeChild(b)}this.lastPokers=null}};
Player.prototype.setPortrait=function(a){a&&!this.defaultPortrait?this.defaultPortrait=a:!a&&this.defaultPortrait&&(a=this.defaultPortrait);this.portrait&&this.removeChild(this.portrait);this.portrait=a;this.portrait.x=6;this.portrait.y=7;this.addChild(this.portrait)};Player.prototype.toString=function(){return this.name};Player.prototype.addGlow=function(){Player.glow||(Player.glow=R.playerGlow,Player.glow.x=-4,Player.glow.y=-4);this.addChildAt(Player.glow,0)};Player.DEFAULT={title:"default",names:["小毡帽"]};
Player.DIZHU={title:"dizhu",names:["地主"]};Player.MALE={title:"male",names:["韦小宝"]};Player.FEMALE={title:"female",names:["小萝莉"]};Player.randomData=[];Player.getRandomUser=function(a){a||(a=0.5<Math.random()?Player.MALE:Player.FEMALE);var b=Math.floor(Math.random()*a.names.length),c=a.names[b];return-1==Player.randomData.indexOf(c)?(Player.randomData.push(c),{sex:a,name:c,portrait:a.portraits[b]}):Player.getRandomUser(a)};
Player.getRandomName=function(){var a=Math.floor(Math.random()*Player.ROBOT_NAMES.length);return Player.ROBOT_NAMES[a]};
