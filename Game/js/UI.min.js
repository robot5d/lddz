UI = {
    init: function() {
        this.initButtons();
        this.initToolBar()
    },
    initButtons: function() {
        var d = Button.prototype.onMouseEvent;
        Button.prototype.onMouseEvent = function(a) {
            d.call(this, a);
            "mousemove" != a.type && (a = this.getStage()) && this.fastRender(a.context)
        };
        var b = R.orgBtnUp,
            a = R.orgBtnDown;
        a.x = 0;
        a.y = 0;
        var g = R.btnDisabled;
        g.alpha = 0.8;
        var c = R.txtPlay;
        c.x = 13;
        c.y = 9;
        e = new Button(b, null, a, g);
        e.addChild(c);
        e.width = b.width;
        e.height = b.height;
        this.playBtn = e;
        b = R.blueBtnUp;
        a = R.blueBtnDown;
        c = R.txtTip;
        c.x = 13;
        c.y = 9;
        e = new Button(b,
            null, a, g);
        e.addChild(c);
        this.tipBtn = e;
        c = R.txtReset;
        c.x = 15;
        c.y = 9;
        e = new Button(b, null, a, g);
        e.addChild(c);
        this.resetBtn = e;
        c = casual.copy(R.txtNoPlay);
        c.x = 14;
        c.y = 9;
        e = new Button(b, null, a, g);
        e.addChild(c);
        this.skipBtn = e;
        c = R.txtStart;
        c.x = 13;
        c.y = 9;
        var e = new Button(b, null, a, g);
        e.addChild(c);
        this.startBtn = e;
        c = casual.copy(R.txtNoGamble);
        c.x = 13;
        c.y = 9;
        e = new Button(b, null, a, g);
        e.addChild(c);
        this.noGambleBtn = e;
        c = new GroupBitmap(R.button);
        c.addSlice(R.txtThree, 16, 11);
        c.addSlice(R.txtFen, 33, 9);
        e = new Button(b, null,
            a, g);
        e.addChild(c);
        this.gambleBtn3 = e;
        c = new GroupBitmap(R.button);
        c.addSlice(R.txtTwo, 16, 11);
        c.addSlice(R.txtFen, 33, 9);
        e = new Button(b, null, a, g);
        e.addChild(c);
        this.gambleBtn2 = e;
        c = new GroupBitmap(R.button);
        c.addSlice(R.txtOne, 23, 10);
        c.addSlice(R.txtFen, 33, 8);
        e = new Button(b, null, a, g);
        e.addChild(c);
        this.gambleBtn1 = e
    },
    renderNumber: function(d, b, a, g, c) {
        this.getNumber(b, a, g, c);
        b.fastRender(d, !1, !0)
    },
    getNumber: function(d, b, a, g) {
        d.clear();
        var c = b;
        "string" != typeof b && (c = 10 <= b ? b.toString() : (a ? "" : "0") + b.toString());
        for (a = b = 0; b < c.length; b++) {
            var e = g ? R.white[c[b]] : R.gold[c[b]],
                h = a,
                f = "-" == c[b] ? 4 : 0;
            g && 1 == c.length && "1" == c[0] && (h = a += 2);
            d.addSlice(e, h, f);
            a += e[2] + 0
        }
        d.width = a;
        d.height = g ? 12 : 15;
        return d
    },
    showBubble: function(d, b, a, g, c, e) {
        if (!this.bubble) {
            this.bubble = new Sprite;
            var h = R.bubble;
            h.regX = 42;
            this.bubble.addChild(h)
        }
        if (d) {
            for (this.bubble.getChildAt(0).scaleX = a ? -1 : 1; 1 < this.bubble.getNumChildren();) this.bubble.removeChildAt(1);
            var f;
            switch (b) {
                case "gamble0":
                    f = R.txtNoGamble;
                    f.x = a ? -28 : -19;
                    f.y = 13;
                    break;
                case "gamble1":
                    f =
                        new GroupBitmap(R.button);
                    f.addSlice(R.txtOne, 2, 2);
                    f.addSlice(R.txtFen, 12);
                    f.x = a ? -22 : -17;
                    f.y = 13;
                    break;
                case "gamble2":
                    f = new GroupBitmap(R.button);
                    f.addSlice(R.txtTwo, 2, 2);
                    f.addSlice(R.txtFen, 19);
                    f.x = a ? -28 : -18;
                    f.y = 13;
                    break;
                case "gamble3":
                    f = new GroupBitmap(R.button);
                    f.addSlice(R.txtThree, 2, 2);
                    f.addSlice(R.txtFen, 19);
                    f.x = a ? -28 : -18;
                    f.y = 13;
                    break;
                case "noplay":
                    f = R.txtNoPlay, f.x = a ? -28 : -17, f.y = 13
            }
            this.bubble.addChild(f);
            this.bubble.x = c;
            this.bubble.y = e;
            g.addChild(this.bubble);
            this.bubble.fastRender(g.context)
        }
    },
    initToolBar: function() {
        if (this.toolbar) this.toolbar.lastPokers.removeAllChildren();
        else {
            this.toolbar = {};
            var d = new Sprite;
            d.width = 72;
            d.height = 32;
            d.x = (ddz.width - d.width >> 1) - 25;
            d.y = 2;
            this.toolbar.lastPokers = d;
            var b = new Sprite;
            this.toolbar.container = b;
            var a = R.vline;
            a.x = d.x - 18;
            a.y = 3;
            b.addChild(a);
            a = casual.copy(a, null, {
                x: a.x + 155
            });
            b.addChild(a);
            a = R.configBtn;
            a.x = d.x - 65;
            a.y = 6;
            a.name = "config";
            b.addChild(a);
            a.onMouseUp = function() {};
            a = R.exitBtn;
            a.x = d.x + 155;
            a.y = 4;
            a.name =
                "exit";
           // b.addChild(a);
           // a.onMouseUp = function() {
				//alert("onMouseUp");
                //window.location.href = "http://www.liebao.cn/game/?f=doudizhu";
           // };
            b = R.txtScore;
            b.x = d.x + d.width + 6;
            b.y = 3;
            this.toolbar.scoreText = b;
            b = R.txtBase;
            b.x = d.x + d.width + 6;
            b.y = 18;
            this.toolbar.baseText = b;
            d = new GroupBitmap(R.number);
            d.x = b.x + b.width + 3;
            d.y = 5;
            d.width = 15;
            d.height = 12;
            this.toolbar.scoreRate = d;
            d = new GroupBitmap(R.number);
            d.x = b.x + b.width + 3;
            d.y = 19;
            d.width = 15;
            d.height = 12;
            this.toolbar.baseScore = d
        }
    },
    showPopup: function(d) {
        if (!d && R.popupBg.isPopuped) this.popupStage.removeAllChildren(), ddz.container.removeChild(this.popupStage.canvas),
            ddz.container.removeChild(this.popupBgCanvas), this.popupCanvas = this.popupBgCanvas = null, R.popupBg.isPopuped = !1;
        else if (d && !R.popupBg.isPopuped) {
            d = {
                width: R.popupBg.width,
                height: 140,
                left: R.exitBtn.x - R.popupBg.width + 38,
                top: R.exitBtn.y + 30
            };
            var b = ddz.createCanvas("popupbg", d);
            ddz.container.appendChild(b);
            this.popupBgCanvas = b;
            R.popupBg._render(b.getContext("2d"));
            R.popupBg.isPopuped = !0;
            d = ddz.createCanvas("popup", d);
            ddz.container.appendChild(d);
            d = new Stage(d.getContext("2d"));
            d.setFrameRate(0);
            this.popupStage =
                d;
            var a = casual.copy(R.bigBtnUp, null, {
                    scaleX: 0.9,
                    scaleY: 0.9
                }),
                g = casual.copy(R.bigBtnDown, null, {
                    scaleX: 0.9,
                    scaleY: 0.9
                }),
                c = R.labelRestart;
            c.x = a.getCurrentWidth() - c.width >> 1;
            c.y = 9;
            b = new Button(a, null, g);
            b.addChild(c);
            b.x = R.popupBg.x + 20;
            b.y = R.popupBg.y + 26;
            d.addChild(b);
            b.onMouseUp = function() {
                //location.href = "/stat/DouDiZhu"
            };
            var e = R.labelExit;
            e.x = c.x;
            e.y = c.y;
            a = new Button(a, null, g);
            a.addChild(e);
            a.x = b.x;
            a.y = b.y + 46;
            d.addChild(a);
            a.onMouseUp = function() {
               // window.location.href = "http://game.weibo.cn"
            }
        }
    }
};